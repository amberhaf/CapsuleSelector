{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\A\\\\79tu4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\A\\\\79tu4\\\\src\\\\modules\\\\web\\\\pages\\\\dashboard\\\\Calendar.js\";\nimport React, { Component } from 'react';\nimport HTML5Backend from 'react-dnd-html5-backend';\nimport { DragDropContext } from 'react-dnd';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport moment from 'moment';\nimport uuidV4 from 'uuid/v4';\nimport { minTime, maxTime, calendarInitialState } from '../../../../config/constants'; //Compoments\n\nimport BigCalendar from 'react-big-calendar';\nimport Dialog from 'material-ui/Dialog';\nimport Modal from './Modal';\nimport Sidebar from './Sidebar';\nimport Footer from './Footer';\nimport FloatingActionButton from 'material-ui/FloatingActionButton';\nimport ContentAdd from 'material-ui/svg-icons/content/add'; //Actions\n\nimport { GetEvents, UpdateEvents, GetEquipments, UpdateEquipments, GetPeople, UpdatePeople } from \"../../../../helpers/db\"; //Styles\n\nimport './styles/dragAndDrop/styles.css';\nimport './styles/less/styles.css';\nimport './styles/css/react-big-calendar.css';\nBigCalendar.momentLocalizer(moment); // or globalizeLocalizer\n\nvar DragAndDropCalendar = withDragAndDrop(BigCalendar, {\n  backend: false\n});\n\nclass Dnd extends Component {\n  constructor(props) {\n    super(props);\n\n    this.selectEvent = event => {\n      this.handleOpen(event);\n    };\n\n    this.resizeEvent = (resizeType, {\n      event,\n      start,\n      end\n    }) => {\n      var events = this.state.events;\n      var nextEvents = events.map(existingEvent => {\n        return existingEvent.id === event.id ? _objectSpread(_objectSpread({}, existingEvent), {}, {\n          start,\n          end\n        }) : existingEvent;\n      });\n      UpdateEvents(event.id).update({\n        start,\n        end\n      }).then(this.setState({\n        events: nextEvents\n      })).catch(error => {\n        console.error('Update error', error);\n      });\n    };\n\n    this.createEquipment = ({\n      title,\n      desc\n    }) => {\n      var equipments = this.state.equipments;\n      var newEquipmentId = uuidV4();\n\n      var updatedEquipment = _objectSpread(_objectSpread({}, this.state.modal), {}, {\n        id: newEquipmentId,\n        ownerId: this.props.uid,\n        title,\n        desc\n      });\n\n      var nextEquipments = [...equipments];\n      nextEquipments.push(updatedEquipment);\n      UpdateEquipments(newEquipmentId).set(updatedEquipment).then(this.setState({\n        equipments: nextEquipments\n      })).catch(error => {\n        console.error('Create New Equipment error', error);\n      });\n    };\n\n    this.createPeople = ({\n      title,\n      desc,\n      phone\n    }) => {\n      var people = this.state.people;\n      var newPeopleId = uuidV4();\n\n      var updatedPeople = _objectSpread(_objectSpread({}, this.state.modal), {}, {\n        id: newPeopleId,\n        ownerId: this.props.uid,\n        title,\n        desc,\n        phone\n      });\n\n      var nextPeople = [...people];\n      nextPeople.push(updatedPeople);\n      UpdatePeople(newPeopleId).set(updatedPeople).then(this.setState({\n        people: nextPeople\n      })).catch(error => {\n        console.error('Create New People error', error);\n      });\n    };\n\n    this.editEvent = ({\n      id,\n      title,\n      desc\n    }) => {\n      var events = this.state.events;\n      var nextEvents = events.map(existingEvent => {\n        return existingEvent.id === id ? _objectSpread(_objectSpread({}, existingEvent), {}, {\n          title,\n          desc\n        }) : existingEvent;\n      });\n      UpdateEvents(id).update({\n        title,\n        desc\n      }).then(this.setState({\n        events: nextEvents\n      })).catch(error => {\n        console.error('Update Event error', error);\n      });\n    };\n\n    this.editEquipment = ({\n      id,\n      title,\n      desc\n    }) => {\n      var equipments = this.state.equipments;\n      var nextEquipments = equipments.map(existingEquipment => {\n        return existingEquipment.id === id ? _objectSpread(_objectSpread({}, existingEquipment), {}, {\n          title,\n          desc\n        }) : existingEquipment;\n      });\n      UpdateEquipments(id).update({\n        title,\n        desc\n      }).then(this.setState({\n        equipments: nextEquipments\n      })).catch(error => {\n        console.error('Update Equipment error', error);\n      });\n    };\n\n    this.editPeople = ({\n      id,\n      title,\n      desc,\n      phone\n    }) => {\n      var people = this.state.people;\n      var nextPeople = people.map(existingPeople => {\n        return existingPeople.id === id ? _objectSpread(_objectSpread({}, existingPeople), {}, {\n          title,\n          desc\n        }) : existingPeople;\n      });\n      UpdatePeople(id).update({\n        title,\n        desc,\n        phone\n      }).then(this.setState({\n        people: nextPeople\n      })).catch(error => {\n        console.error('Update Equipment error', error);\n      });\n    };\n\n    this.deleteEvent = ({\n      id\n    }) => {\n      var events = this.state.events;\n      var nextEvents = events.filter(existingEvent => {\n        return existingEvent.id !== id;\n      });\n      UpdateEvents(id).delete().then(this.setState({\n        events: nextEvents\n      })).catch(error => {\n        console.error('Delete Event error', error);\n      });\n    };\n\n    this.deleteEquipment = ({\n      id\n    }) => {\n      var equipments = this.state.equipments;\n      var nextEquipments = equipments.filter(existingEquipment => {\n        return existingEquipment.id !== id;\n      });\n      UpdateEquipments(id).delete().then(this.setState({\n        equipments: nextEquipments\n      })).catch(error => {\n        console.error('Delete error', error);\n      });\n    };\n\n    this.deletePeople = ({\n      id\n    }) => {\n      var people = this.state.people;\n      var nextPeople = people.filter(existingPeople => {\n        return existingPeople.id !== id;\n      });\n      UpdatePeople(id).delete().then(this.setState({\n        people: nextPeople\n      })).catch(error => {\n        console.error('Delete error', error);\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        modalOpen: false,\n        equipmentsOpen: false,\n        peopleOpen: false,\n        modal: calendarInitialState.modal\n      });\n    };\n\n    this.handleOpen = event => {\n      this.setState({\n        modalOpen: true,\n        modal: event\n      });\n    };\n\n    this.handleEquipments = event => {\n      this.setState({\n        modal: event ? event : this.state.modal,\n        equipmentsOpen: true\n      });\n    };\n\n    this.handlePeople = event => {\n      this.setState({\n        modal: event ? event : _objectSpread(_objectSpread({}, this.state.modal), {}, {\n          phone: null\n        }),\n        peopleOpen: true\n      });\n    };\n\n    this.state = calendarInitialState;\n    this.moveEvent = this.moveEvent.bind(this);\n  }\n\n  componentDidMount() {\n    var newEvents = [];\n    var newEquipments = [];\n    var newPeople = [];\n    GetEvents(this.props.uid).then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        newEvents.push(doc.data());\n        this.setState({\n          events: newEvents\n        });\n      });\n    });\n    GetEquipments(this.props.uid).then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        newEquipments.push(doc.data());\n        this.setState({\n          equipments: newEquipments\n        });\n      });\n    });\n    GetPeople(this.props.uid).then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        newPeople.push(doc.data());\n        this.setState({\n          people: newPeople\n        });\n      });\n    });\n  }\n\n  moveEvent({\n    event,\n    start,\n    end\n  }) {\n    var events = this.state.events;\n    var idx = events.indexOf(event);\n\n    var updatedEvent = _objectSpread(_objectSpread({}, event), {}, {\n      start,\n      end\n    });\n\n    var nextEvents = [...events];\n\n    if (idx > -1) {\n      nextEvents.splice(idx, 1, updatedEvent);\n      UpdateEvents(event.id).update({\n        start,\n        end\n      }).then(this.setState({\n        events: nextEvents\n      })).catch(error => {\n        console.error('Update error', error);\n      });\n    } else {\n      var newEventId = uuidV4();\n      updatedEvent = _objectSpread(_objectSpread({}, updatedEvent), {}, {\n        id: newEventId,\n        ownerId: this.props.uid\n      });\n      console.log(updatedEvent);\n      nextEvents.push(updatedEvent);\n      UpdateEvents(newEventId).set(updatedEvent).then(this.setState({\n        events: nextEvents\n      })).catch(error => {\n        console.error('Create New Event error', error);\n      });\n    }\n  }\n\n  render() {\n    if (this.state.events) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: 'row',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: 'col-2',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }\n      }, \"Equipments:\", /*#__PURE__*/React.createElement(FloatingActionButton, {\n        mini: true,\n        className: 'm-2',\n        onClick: () => this.handleEquipments(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ContentAdd, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Sidebar, {\n        events: this.state.equipments,\n        onClickEvent: this.handleEquipments,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: 500\n        },\n        className: 'col-8',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(DragAndDropCalendar, {\n        events: this.state.events,\n        onEventDrop: this.moveEvent,\n        resizable: true,\n        onEventResize: this.resizeEvent,\n        defaultView: \"week\",\n        defaultDate: new Date(),\n        onSelectEvent: this.selectEvent,\n        min: minTime,\n        max: maxTime,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Dialog, {\n        title: \"Task\",\n        modal: false,\n        open: this.state.modalOpen,\n        onRequestClose: this.handleClose,\n        autoScrollBodyContent: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Modal, {\n        event: this.state.modal,\n        onRequestClose: this.handleClose,\n        onEditEvent: this.editEvent,\n        onDeleteEvent: this.deleteEvent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Dialog, {\n        title: \"Equipments\",\n        modal: false,\n        open: this.state.equipmentsOpen,\n        onRequestClose: this.handleClose,\n        autoScrollBodyContent: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Modal, {\n        event: this.state.modal,\n        onRequestClose: this.handleClose,\n        onCreatEvent: this.createEquipment,\n        onEditEvent: this.editEquipment,\n        onDeleteEvent: this.deleteEquipment,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Dialog, {\n        title: \"People\",\n        modal: false,\n        open: this.state.peopleOpen,\n        onRequestClose: this.handleClose,\n        autoScrollBodyContent: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Modal, {\n        event: this.state.modal,\n        onRequestClose: this.handleClose,\n        onCreatEvent: this.createPeople,\n        onEditEvent: this.editPeople,\n        onDeleteEvent: this.deletePeople,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: 'col-2',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }\n      }, \"People:\", /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(FloatingActionButton, {\n        mini: true,\n        className: 'm-2',\n        onClick: () => this.handlePeople(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(ContentAdd, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(Sidebar, {\n        events: this.state.people,\n        onClickEvent: this.handlePeople,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(Footer, {\n        selectedEvents: this.state.events,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }\n      }));\n    }\n  }\n\n}\n\nexport default DragDropContext(HTML5Backend)(Dnd);","map":{"version":3,"sources":["C:/Users/A/79tu4/src/modules/web/pages/dashboard/Calendar.js"],"names":["React","Component","HTML5Backend","DragDropContext","withDragAndDrop","moment","uuidV4","minTime","maxTime","calendarInitialState","BigCalendar","Dialog","Modal","Sidebar","Footer","FloatingActionButton","ContentAdd","GetEvents","UpdateEvents","GetEquipments","UpdateEquipments","GetPeople","UpdatePeople","momentLocalizer","DragAndDropCalendar","backend","Dnd","constructor","props","selectEvent","event","handleOpen","resizeEvent","resizeType","start","end","events","state","nextEvents","map","existingEvent","id","update","then","setState","catch","error","console","createEquipment","title","desc","equipments","newEquipmentId","updatedEquipment","modal","ownerId","uid","nextEquipments","push","set","createPeople","phone","people","newPeopleId","updatedPeople","nextPeople","editEvent","editEquipment","existingEquipment","editPeople","existingPeople","deleteEvent","filter","delete","deleteEquipment","deletePeople","handleClose","modalOpen","equipmentsOpen","peopleOpen","handleEquipments","handlePeople","moveEvent","bind","componentDidMount","newEvents","newEquipments","newPeople","querySnapshot","forEach","doc","data","idx","indexOf","updatedEvent","splice","newEventId","log","render","height","Date"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport HTML5Backend from 'react-dnd-html5-backend'\r\nimport { DragDropContext } from 'react-dnd'\r\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop'\r\nimport moment from 'moment'\r\nimport uuidV4 from 'uuid/v4'\r\nimport { minTime, maxTime, calendarInitialState } from '../../../../config/constants'\r\n//Compoments\r\nimport BigCalendar from 'react-big-calendar'\r\nimport Dialog from 'material-ui/Dialog'\r\nimport Modal from './Modal'\r\nimport Sidebar from './Sidebar'\r\nimport Footer from './Footer'\r\nimport FloatingActionButton from 'material-ui/FloatingActionButton'\r\nimport ContentAdd from 'material-ui/svg-icons/content/add'\r\n//Actions\r\nimport {\r\n  GetEvents,\r\n  UpdateEvents,\r\n  GetEquipments,\r\n  UpdateEquipments,\r\n  GetPeople,\r\n  UpdatePeople\r\n} from \"../../../../helpers/db\";\r\n//Styles\r\nimport './styles/dragAndDrop/styles.css'\r\nimport './styles/less/styles.css'\r\nimport './styles/css/react-big-calendar.css'\r\n\r\n\r\nBigCalendar.momentLocalizer(moment); // or globalizeLocalizer\r\n\r\nconst DragAndDropCalendar = withDragAndDrop(BigCalendar, {backend: false})\r\n\r\nclass Dnd extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = calendarInitialState\r\n\r\n    this.moveEvent = this.moveEvent.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n    const newEvents = []\r\n    const newEquipments = []\r\n    const newPeople = []\r\n\r\n    GetEvents(this.props.uid).then(querySnapshot => {\r\n      querySnapshot.forEach(doc => {\r\n        newEvents.push(doc.data())\r\n        this.setState({\r\n          events: newEvents,\r\n        })\r\n      });\r\n    })\r\n    GetEquipments(this.props.uid).then(querySnapshot => {\r\n      querySnapshot.forEach(doc => {\r\n        newEquipments.push(doc.data())\r\n        this.setState({\r\n          equipments: newEquipments,\r\n        })\r\n      });\r\n    })\r\n    GetPeople(this.props.uid).then(querySnapshot => {\r\n      querySnapshot.forEach(doc => {\r\n        newPeople.push(doc.data())\r\n        this.setState({\r\n          people: newPeople,\r\n        })\r\n      });\r\n    })\r\n  }\r\n\r\n  moveEvent({event, start, end}) {\r\n    const {events} = this.state\r\n    const idx = events.indexOf(event)\r\n    let updatedEvent = {...event, start, end}\r\n    const nextEvents = [...events]\r\n    if (idx > -1) {\r\n      nextEvents.splice(idx, 1, updatedEvent)\r\n      UpdateEvents(event.id).update({start, end}).then(\r\n        this.setState({\r\n          events: nextEvents,\r\n        })\r\n      ).catch(error => {\r\n        console.error('Update error', error);\r\n      });\r\n    }\r\n    else {\r\n      const newEventId = uuidV4()\r\n      updatedEvent = {...updatedEvent, id: newEventId, ownerId: this.props.uid}\r\n      console.log(updatedEvent)\r\n      nextEvents.push(updatedEvent)\r\n      UpdateEvents(newEventId).set(updatedEvent).then(\r\n        this.setState({\r\n          events: nextEvents,\r\n        })\r\n      ).catch(error => {\r\n        console.error('Create New Event error', error);\r\n      });\r\n    }\r\n  }\r\n\r\n  selectEvent = (event) => {\r\n    this.handleOpen(event)\r\n  }\r\n\r\n  resizeEvent = (resizeType, {event, start, end}) => {\r\n    const {events} = this.state\r\n\r\n    const nextEvents = events.map(existingEvent => {\r\n      return existingEvent.id === event.id\r\n        ? {...existingEvent, start, end}\r\n        : existingEvent\r\n    })\r\n\r\n    UpdateEvents(event.id).update({start, end}).then(\r\n      this.setState({\r\n        events: nextEvents,\r\n      })\r\n    ).catch(error => {\r\n      console.error('Update error', error);\r\n    });\r\n  }\r\n  createEquipment = ({title, desc}) => {\r\n    const {equipments} = this.state\r\n    const newEquipmentId = uuidV4()\r\n    const updatedEquipment = {...this.state.modal, id: newEquipmentId, ownerId: this.props.uid, title, desc}\r\n    const nextEquipments = [...equipments]\r\n    nextEquipments.push(updatedEquipment)\r\n    UpdateEquipments(newEquipmentId).set(updatedEquipment).then(\r\n      this.setState({\r\n        equipments: nextEquipments,\r\n      })\r\n    ).catch(error => {\r\n      console.error('Create New Equipment error', error);\r\n    });\r\n  }\r\n  createPeople = ({title, desc, phone}) => {\r\n    const {people} = this.state\r\n    const newPeopleId = uuidV4()\r\n    const updatedPeople = {...this.state.modal, id: newPeopleId, ownerId: this.props.uid, title, desc, phone}\r\n    const nextPeople = [...people]\r\n    nextPeople.push(updatedPeople)\r\n    UpdatePeople(newPeopleId).set(updatedPeople).then(\r\n      this.setState({\r\n        people: nextPeople,\r\n      })\r\n    ).catch(error => {\r\n      console.error('Create New People error', error);\r\n    });\r\n  }\r\n  editEvent = ({id, title, desc}) => {\r\n    const {events} = this.state\r\n\r\n    const nextEvents = events.map(existingEvent => {\r\n      return existingEvent.id === id\r\n        ? {...existingEvent, title, desc}\r\n        : existingEvent\r\n    })\r\n\r\n    UpdateEvents(id).update({title, desc}).then(\r\n      this.setState({\r\n        events: nextEvents,\r\n      })\r\n    ).catch(error => {\r\n      console.error('Update Event error', error);\r\n    });\r\n  }\r\n  editEquipment = ({id, title, desc}) => {\r\n    const {equipments} = this.state\r\n\r\n    const nextEquipments = equipments.map(existingEquipment => {\r\n      return existingEquipment.id === id\r\n        ? {...existingEquipment, title, desc}\r\n        : existingEquipment\r\n    })\r\n    UpdateEquipments(id).update({title, desc}).then(\r\n      this.setState({\r\n        equipments: nextEquipments,\r\n      })\r\n    ).catch(error => {\r\n      console.error('Update Equipment error', error);\r\n    });\r\n  }\r\n  editPeople = ({id, title, desc, phone}) => {\r\n    const {people} = this.state\r\n\r\n    const nextPeople = people.map(existingPeople => {\r\n      return existingPeople.id === id\r\n        ? {...existingPeople, title, desc}\r\n        : existingPeople\r\n    })\r\n    UpdatePeople(id).update({title, desc, phone}).then(\r\n      this.setState({\r\n        people: nextPeople,\r\n      })\r\n    ).catch(error => {\r\n      console.error('Update Equipment error', error);\r\n    });\r\n  }\r\n  deleteEvent = ({id}) => {\r\n    const {events} = this.state\r\n\r\n    const nextEvents = events.filter(existingEvent => {\r\n      return existingEvent.id !== id\r\n    })\r\n\r\n    UpdateEvents(id).delete().then(\r\n      this.setState({\r\n        events: nextEvents,\r\n      })\r\n    ).catch(error => {\r\n      console.error('Delete Event error', error);\r\n    });\r\n  }\r\n  deleteEquipment = ({id}) => {\r\n    const {equipments} = this.state\r\n\r\n    const nextEquipments = equipments.filter(existingEquipment => {\r\n      return existingEquipment.id !== id\r\n    })\r\n\r\n    UpdateEquipments(id).delete().then(\r\n      this.setState({\r\n        equipments: nextEquipments,\r\n      })\r\n    ).catch(error => {\r\n      console.error('Delete error', error);\r\n    });\r\n  }\r\n  deletePeople = ({id}) => {\r\n    const {people} = this.state\r\n\r\n    const nextPeople = people.filter(existingPeople => {\r\n      return existingPeople.id !== id\r\n    })\r\n\r\n    UpdatePeople(id).delete().then(\r\n      this.setState({\r\n        people: nextPeople,\r\n      })\r\n    ).catch(error => {\r\n      console.error('Delete error', error);\r\n    });\r\n  }\r\n  handleClose = () => {\r\n    this.setState({\r\n      modalOpen: false,\r\n      equipmentsOpen: false,\r\n      peopleOpen: false,\r\n      modal: calendarInitialState.modal,\r\n    });\r\n  };\r\n  handleOpen = (event) => {\r\n    this.setState({\r\n      modalOpen: true,\r\n      modal: event,\r\n    });\r\n  };\r\n  handleEquipments = (event) => {\r\n    this.setState({\r\n      modal: event ? event : this.state.modal,\r\n      equipmentsOpen: true\r\n    });\r\n  }\r\n  handlePeople = (event) => {\r\n    this.setState({\r\n      modal: event ? event : {...this.state.modal, phone: null},\r\n      peopleOpen: true\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.events) {\r\n      return (\r\n        <div className={'row'}>\r\n          <div className={'col-2'}>\r\n            Equipments:\r\n            <FloatingActionButton\r\n              mini={true}\r\n              className={'m-2'}\r\n              onClick={() => this.handleEquipments()}\r\n            >\r\n              <ContentAdd />\r\n            </FloatingActionButton>\r\n            <Sidebar events={this.state.equipments}\r\n                     onClickEvent={this.handleEquipments}\r\n            />\r\n          </div>\r\n          <div style={{height: 500}} className={'col-8'}>\r\n\r\n            <DragAndDropCalendar\r\n\r\n              events={this.state.events}\r\n              onEventDrop={this.moveEvent}\r\n              resizable\r\n              onEventResize={this.resizeEvent}\r\n              defaultView=\"week\"\r\n              defaultDate={new Date()}\r\n              onSelectEvent={this.selectEvent}\r\n              min={minTime}\r\n              max={maxTime}\r\n            />\r\n            <Dialog title=\"Task\"\r\n                    modal={false}\r\n                    open={this.state.modalOpen}\r\n                    onRequestClose={this.handleClose}\r\n                    autoScrollBodyContent={true}\r\n            >\r\n              <Modal event={this.state.modal}\r\n                     onRequestClose={this.handleClose}\r\n                     onEditEvent={this.editEvent}\r\n                     onDeleteEvent={this.deleteEvent}\r\n\r\n              />\r\n            </Dialog>\r\n            <Dialog title=\"Equipments\"\r\n                    modal={false}\r\n                    open={this.state.equipmentsOpen}\r\n                    onRequestClose={this.handleClose}\r\n                    autoScrollBodyContent={true}\r\n            >\r\n              <Modal event={this.state.modal}\r\n                     onRequestClose={this.handleClose}\r\n                     onCreatEvent={this.createEquipment}\r\n                     onEditEvent={this.editEquipment}\r\n                     onDeleteEvent={this.deleteEquipment}\r\n              />\r\n            </Dialog>\r\n            <Dialog title=\"People\"\r\n                    modal={false}\r\n                    open={this.state.peopleOpen}\r\n                    onRequestClose={this.handleClose}\r\n                    autoScrollBodyContent={true}\r\n            >\r\n              <Modal event={this.state.modal}\r\n                     onRequestClose={this.handleClose}\r\n                     onCreatEvent={this.createPeople}\r\n                     onEditEvent={this.editPeople}\r\n                     onDeleteEvent={this.deletePeople}\r\n              />\r\n            </Dialog>\r\n          </div>\r\n          <div className={'col-2'}>\r\n            People:\r\n            <div>\r\n              <FloatingActionButton\r\n                mini={true}\r\n                className={'m-2'}\r\n                onClick={() => this.handlePeople()}\r\n              >\r\n                <ContentAdd />\r\n              </FloatingActionButton>\r\n            </div>\r\n            <Sidebar events={this.state.people}\r\n                     onClickEvent={this.handlePeople}\r\n            />\r\n          </div>\r\n          <Footer selectedEvents={this.state.events} />\r\n        </div>\r\n      )\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default DragDropContext(HTML5Backend)(Dnd)"]},"metadata":{},"sourceType":"module"}